// Name: Blogger Wishlist Plugin
// Author: Việt Designer
// Website: www.thietkeblogspot.com
if(document.querySelector("#plugin-custom,#wishlist-id,#wishlist_table tbody")){var wishlist_empty="",data_label="";wishlist_empty="vi"==langCof?'<td colspan="6" class="wishlist-empty">Không có sản phẩm nào được thêm vào Wishlist</td>':'<td colspan="6" class="wishlist-empty">No products were added to the wishlist</td>',$(document).ready(function(){var t,a,e,l,s,i=[],o="",d="";if((data_icon_label=localStorage.getItem("data_icon_label"))?($(".header-wishlist-icon>a>i").attr("data-icon-label",data_icon_label),data_label=Number($(".header-wishlist-icon>a>i").attr("data-icon-label"))):data_label="0",$(".wishlist-article").each(function(){t=$(this).find("button.wishlist-button"),$(t).one("click",function(t){t.preventDefault();var i=$(this);a=i.attr("value"),id_sp=this.value,$.ajax({type:"GET",url:"/feeds/posts/default/"+id_sp,data:{alt:"json-in-script"},dataType:"jsonp",success:function(t){if(t.entry){for(var r=t.entry,n=0;n<r.link.length;n++)if("alternate"==r.link[n].rel){url_sp=r.link[n].href;break}if("category"in r){gia_sp=curr(r.category[0].term,".",",");for(var c=1;c<r.category.length;c++){var h=(o+=r.category[c].term).indexOf(stock);o.slice(h,Number(h)+stock.length)==stock?(d=out_of_stock,s=""):(d=in_of_stock,s='<button class="single_add_to_cart_button button alt" name="add-to-cart" type="submit" value='+id_sp+' style="margin:0;">Thêm vào giỏ</button>')}}"media$thumbnail"in r?anh_sp=r.media$thumbnail.url.replace("s72-c","s76"):"enclosure"==r.link[0].rel&&("image/png"!=r.link[0].type&&"image/jpg"!=r.link[0].type&&"image/jpeg"!=r.link[0].type||(anh_sp=r.link[0].href)),ten_sp=r.title.$t,remove_item=pageConf.carturl+"?remove_item="+id_sp,cart_item='<tr><td class="product-remove"><a href='+remove_item+' class="remove" aria-label="Remove this item">×</a></td><td class="product-thumbnail"><a href='+url_sp+'><img alt="'+ten_sp+'" src="'+anh_sp+'"></a></td><td class="product-name"><a href='+url_sp+">"+ten_sp+'</a><div class="show-for-small mobile-product-price"><span class="mobile-product-price__qty">1 x </span><span class="woocommerce-Price-amount amount">'+gia_sp+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+'</span></div></td><td class="product-price"><span class="woocommerce-Price-amount amount">'+gia_sp+'</span><span class="woocommerce-Price-currencySymbol amount">'+dv_tt+'</span></td><th class="product-stock-status"><span class="nobr">'+d+'</span></th><td class="product-add-to-cart">'+s+"</td></tr>",data_label=Number(data_label)+1,$(".header-wishlist-icon>a>i").addClass("added"),$(".header-wishlist-icon>a>i").attr("data-icon-label",data_label),localStorage.setItem("data_icon_label",data_label),i.addClass("loading"),i.parent().find(".add_to_wishlist").click(),setTimeout(function(){i.removeClass("loading"),i.addClass("wishlist-added"),$(".header-wishlist-icon>a>i").removeClass("added")},500),e="<span id="+a+"></span>",$("#wishlist-id").append(e),l=$("#wishlist-id").html(),localStorage.setItem("wishlist_added",l),$("table#wishlist_table>tbody").append(cart_item),wishlist_html=$("table#wishlist_table>tbody").html(),localStorage.setItem("wishlist_table_saved",wishlist_html)}}})})}),l=localStorage.getItem("wishlist_added")){$("#wishlist-id").html(l);for(var r=document.querySelector("#wishlist-id").getElementsByTagName("span"),n=0;n<r.length;n++)i.push(r[n].id);$(".wishlist-button").hover(function(){var t=$(this);a=t.attr("value"),i.includes(a)&&(t.parent().find(".yith-wcwl-add-button").removeClass("show").addClass("hide"),t.parent().find(".yith-wcwl-wishlistaddedbrowse").removeClass("hide").addClass("show"),t.unbind("click"))})}if(wishlist_html=localStorage.getItem("wishlist_table_saved")){$("table#wishlist_table>tbody").html(wishlist_html),$("table.wishlist_table>tbody").html(wishlist_html);var c=$("table.wishlist_table>tbody").children("tr").size();$("table.wishlist_table>tbody>tr").each(function(){var t=$(this),a=$(this).find("td.product-remove a");$(a).click(function(e){e.preventDefault(),t.parent().addClass("processing"),c-=1,setTimeout(function(){$(".header-wishlist-icon>a>i").attr("data-icon-label",data_label-1),$(a).parent().parent().remove(),wishlist_html=$("table.wishlist_table>tbody").html(),localStorage.setItem("wishlist_table_saved",wishlist_html),data_label=Number($(".header-wishlist-icon>a>i").attr("data-icon-label")),localStorage.setItem("data_icon_label",data_label),0==c&&($(".header-wishlist-icon>a>i").attr("data-icon-label",0),$("table#wishlist_table>tbody").html(wishlist_empty),data_label=Number($(".header-wishlist-icon>a>i").attr("data-icon-label")),$("table.wishlist_table>tbody").html(wishlist_empty),localStorage.setItem("data_icon_label",data_label),localStorage.removeItem("wishlist_table_saved"),localStorage.removeItem("wishlist_added")),$(".processing").removeClass("processing")},500)})})}})}
